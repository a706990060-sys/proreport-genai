# 部署方案指南

## 📊 两种部署方式对比

| 特性 | Web应用部署 | 桌面应用打包 |
|------|------------|------------|
| **用户使用方式** | 浏览器访问网址 | 下载安装客户端 |
| **安装要求** | 无需安装 | 需要安装 |
| **跨平台** | ✅ 完全支持 | ⚠️ 需要分别打包 |
| **更新方式** | 自动更新 | 需要重新下载 |
| **服务器需求** | ✅ 需要 | ❌ 不需要（但需要后端） |
| **文件大小** | 小（仅前端） | 大（包含Node.js） |
| **推荐场景** | 多用户、团队使用 | 单机使用、离线需求 |

---

## 🌐 方案一：Web应用部署（推荐）

### 适用场景
- 多用户使用
- 团队协作
- 需要统一管理
- 希望自动更新

### 部署架构

```
用户浏览器 → 你的服务器 → 后端API → Gemini API
           (前端静态文件)  (Express服务器)
```

### 部署步骤

#### 1. 构建生产版本

```bash
cd F:\ProReport-GenAI

# 构建前端
npm run build:client

# 构建后端
npm run build:server
```

#### 2. 准备部署文件

构建后会生成：
- `dist/` - 前端静态文件
- `server/dist/` - 后端编译文件

#### 3. 服务器部署选项

**选项A：使用云服务器（推荐）**
- 阿里云、腾讯云、AWS等
- 需要：域名、SSL证书（HTTPS）

**选项B：使用VPS**
- 需要：Linux/Windows服务器
- 安装Node.js环境

**选项C：使用PaaS平台**
- Vercel（前端）+ Railway/Render（后端）
- 或使用Docker部署

#### 4. 部署配置

**前端部署：**
- 将 `dist/` 目录上传到Web服务器（Nginx/Apache）
- 配置反向代理到后端API

**后端部署：**
- 上传 `server/` 目录
- 安装依赖：`npm install --production`
- 配置环境变量 `.env`
- 使用PM2或systemd管理进程

---

## 💻 方案二：桌面应用打包（Electron）

### 适用场景
- 单机使用
- 需要离线功能
- 希望像传统软件一样使用

### 打包步骤

#### 1. 安装Electron

```bash
npm install electron electron-builder --save-dev
```

#### 2. 创建Electron主进程文件

创建 `electron/main.js` 和 `electron/preload.js`

#### 3. 配置打包脚本

更新 `package.json` 添加打包命令

#### 4. 打包应用

```bash
npm run build:electron
```

会生成：
- Windows: `.exe` 安装包
- macOS: `.dmg` 安装包
- Linux: `.AppImage` 或 `.deb`

---

## 🚀 推荐方案：Web应用部署（详细步骤）

### 步骤1：构建项目

```bash
cd F:\ProReport-GenAI

# 构建前端
npm run build:client

# 构建后端
npm run build:server
```

### 步骤2：准备部署包

创建部署目录结构：
```
deploy/
├── frontend/     # 前端静态文件（dist目录）
├── backend/      # 后端文件（server目录）
└── deploy.sh     # 部署脚本
```

### 步骤3：服务器配置

**Nginx配置示例（前端）：**
```nginx
server {
    listen 80;
    server_name your-domain.com;
    
    root /var/www/proreport-genai/frontend;
    index index.html;
    
    location / {
        try_files $uri $uri/ /index.html;
    }
    
    location /api {
        proxy_pass http://localhost:3001;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }
}
```

**后端进程管理（PM2）：**
```bash
pm2 start server/dist/index.js --name proreport-api
pm2 save
pm2 startup
```

---

## 📦 方案三：Docker容器化部署（高级）

### 优点
- 一键部署
- 环境隔离
- 易于扩展

### Docker配置

创建 `Dockerfile` 和 `docker-compose.yml`

---

## 🎯 快速部署方案（最简单）

### 使用Vercel + Railway（免费方案）

**前端部署到Vercel：**
1. 将前端代码推送到GitHub
2. 在Vercel导入项目
3. 配置构建命令：`npm run build:client`

**后端部署到Railway：**
1. 在Railway创建新项目
2. 连接GitHub仓库
3. 设置根目录为 `server`
4. 配置环境变量
5. 自动部署

**用户访问：**
- 前端：`https://your-app.vercel.app`
- 后端：自动通过API调用

---

## 📝 用户使用方式

### Web应用部署后
用户只需要：
1. 打开浏览器
2. 访问你提供的网址
3. 注册/登录账号
4. 开始使用

**无需下载、无需安装！**

### 桌面应用打包后
用户需要：
1. 下载安装包
2. 运行安装程序
3. 安装到本地
4. 启动应用

---

## 💡 推荐选择

**如果你希望：**
- ✅ 多用户使用 → **选择Web部署**
- ✅ 易于维护 → **选择Web部署**
- ✅ 自动更新 → **选择Web部署**
- ✅ 单机使用 → **选择桌面应用**
- ✅ 离线使用 → **选择桌面应用**

**最佳实践：Web应用部署**

---

## 🔧 下一步操作

根据你的需求选择方案，我可以帮你：
1. 创建Docker配置文件
2. 创建Electron打包配置
3. 创建部署脚本
4. 配置CI/CD自动化部署

告诉我你想选择哪种方案，我会提供详细的实施步骤！






