# 🆓 无需信用卡的免费部署方案

## ❌ 问题

Render免费计划需要信用卡验证，但你的卡片无效。

## ✅ 解决方案

以下是**完全免费且不需要信用卡**的部署方案：

---

## 🚀 方案1：Fly.io（推荐，完全免费）

### 优点
- ✅ 完全免费
- ✅ 不需要信用卡
- ✅ 性能好，不会休眠
- ✅ 支持Node.js
- ✅ 全球CDN

### 部署步骤

#### 步骤1：安装Fly CLI

**Windows (PowerShell):**
```powershell
iwr https://fly.io/install.ps1 -useb | iex
```

**或者下载安装：**
- 访问：https://fly.io/docs/getting-started/installing-flyctl/
- 下载Windows安装包

#### 步骤2：登录Fly.io

```bash
fly auth login
```

会打开浏览器，用GitHub登录。

#### 步骤3：初始化Fly应用

```bash
cd F:\ProReport-GenAI\server
fly launch
```

按照提示操作：
- App name: `proreport-genai-backend`（或自动生成）
- Region: 选择离你最近的（如 `sin` 新加坡）
- 其他保持默认

#### 步骤4：配置环境变量

```bash
fly secrets set GEMINI_API_KEY=AIzaSyD7L7GzfFwFu0BVA5N0EEOKCIe20mlAeK8
fly secrets set JWT_SECRET=proreport-secret-key-2024-change-this
fly secrets set FRONTEND_URL=https://your-app.vercel.app
fly secrets set NODE_ENV=production
fly secrets set DATA_PATH=./data
```

#### 步骤5：部署

```bash
fly deploy
```

等待部署完成，Fly会提供URL，例如：
```
https://proreport-genai-backend.fly.dev
```

---

## 🌐 方案2：Cyclic.sh（最简单）

### 优点
- ✅ 完全免费
- ✅ 不需要信用卡
- ✅ 自动部署
- ✅ 非常简单

### 部署步骤

#### 步骤1：访问Cyclic

1. 访问：https://cyclic.sh
2. 用GitHub登录

#### 步骤2：创建应用

1. 点击 **"Deploy Now"**
2. 选择仓库：`a706990060-sys/proreport-genai`
3. 点击 **"Deploy"**

#### 步骤3：配置

Cyclic会自动检测，但需要手动配置：

1. 点击项目进入设置
2. **Root Directory**: `server`
3. **Build Command**: `npm install && npm run build`
4. **Start Command**: `npm start`

#### 步骤4：环境变量

在设置中添加环境变量（同Render）

#### 步骤5：获取URL

部署完成后，Cyclic会提供URL。

---

## 🔧 方案3：Koyeb（免费，简单）

### 优点
- ✅ 免费
- ✅ 不需要信用卡
- ✅ 自动部署
- ✅ 支持GitHub集成

### 部署步骤

1. 访问：https://www.koyeb.com
2. 用GitHub登录
3. 点击 **"Create App"**
4. 选择GitHub仓库
5. 配置：
   - Root Directory: `server`
   - Build Command: `npm install && npm run build`
   - Run Command: `npm start`
6. 添加环境变量
7. 部署

---

## 💻 方案4：本地部署 + 内网穿透（完全免费）

如果云平台都不行，可以使用本地部署 + 内网穿透。

### 使用ngrok（免费）

#### 步骤1：安装ngrok

1. 访问：https://ngrok.com
2. 注册账号（免费）
3. 下载ngrok
4. 解压到任意目录

#### 步骤2：启动后端服务

```bash
cd F:\ProReport-GenAI\server
npm run dev
```

#### 步骤3：启动ngrok

```bash
ngrok http 3001
```

ngrok会提供一个公网URL，例如：
```
https://xxxx-xxxx-xxxx.ngrok-free.app
```

#### 步骤4：配置Vercel

在Vercel添加环境变量：
- `VITE_API_URL` = `https://xxxx-xxxx-xxxx.ngrok-free.app/api`

**注意**：ngrok免费版每次重启URL会变化，需要更新Vercel配置。

---

## 🎯 推荐方案

### 最推荐：Fly.io

**优点**：
- ✅ 完全免费
- ✅ 不需要信用卡
- ✅ 性能好
- ✅ 不会休眠
- ✅ 稳定可靠

**缺点**：
- ⚠️ 需要安装CLI工具
- ⚠️ 需要命令行操作

### 次推荐：Cyclic.sh

**优点**：
- ✅ 完全免费
- ✅ 不需要信用卡
- ✅ 非常简单
- ✅ 网页操作

**缺点**：
- ⚠️ 功能相对简单

---

## 📝 快速选择

- **想要最简单**：使用Cyclic.sh（网页操作）
- **想要最稳定**：使用Fly.io（性能好）
- **想要完全控制**：使用本地部署+ngrok

---

## 🚀 现在开始

### 推荐：使用Fly.io

1. **安装Fly CLI**：
   ```powershell
   iwr https://fly.io/install.ps1 -useb | iex
   ```

2. **登录**：
   ```bash
   fly auth login
   ```

3. **初始化并部署**：
   ```bash
   cd F:\ProReport-GenAI\server
   fly launch
   ```

4. **配置环境变量**（部署后）：
   ```bash
   fly secrets set GEMINI_API_KEY=你的API密钥
   fly secrets set JWT_SECRET=随机字符串
   fly secrets set FRONTEND_URL=你的Vercel URL
   fly secrets set NODE_ENV=production
   ```

5. **部署**：
   ```bash
   fly deploy
   ```

---

## 📚 详细文档

我已经创建了：
- `无需信用卡的部署方案.md` - 本文件
- 各平台的详细步骤在对应章节

选择一种方案开始部署吧！

